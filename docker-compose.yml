# Generated by Okty.io
version: '3.6'
services:
    nginx:
        build: docker/nginx
        ports:
            - '8080:80'
        volumes:
            - './:/usr/share/nginx/html'
    php-fpm:
        build: docker/php
        volumes:
            - './:/usr/share/nginx/html'
            
    phpmyadmin:
        image: phpmyadmin/phpmyadmin:latest
        expose:
            - 80
        ports:
            - 8081:80
        depends_on:
            - mysql
        environment:
            PMA_HOST: mysql

    composer:
        image: 'composer:1.8'
        command: install
        volumes:
            - './:/app'

    mysql:
        image: mysql:5.7
        working_dir: /application
        volumes:
            - .:/application
            - ./docker/mysql:/var/lib/mysql
        environment:
            - MYSQL_ROOT_PASSWORD=${DB_ROOT_PASSWORD}
            - MYSQL_DATABASE=${DB_DATABASE}
            - MYSQL_USER=${DB_USERNAME}
            - MYSQL_PASSWORD=${DB_PASSWORD}
        ports:
            - "1082:3306"
